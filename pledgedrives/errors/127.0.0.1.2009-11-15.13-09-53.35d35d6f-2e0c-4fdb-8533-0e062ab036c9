(dp1
S'output'
p2
S''
sS'layer'
p3
S'/home/john/webdev/depaul/google_appengine/web2py/applications/pledgedrives/models/db_pledgedrive.py'
p4
sS'code'
p5
S"# coding: utf8\n\n# is_phone=IS_MATCH('(\\d{2}\\-)?[\\d\\-]+(\\#\\d+)?')\n# * allows for empty phone number?\nis_phone=IS_MATCH('(\\d{2}\\-)?[\\d\\-]*(\\#\\d+)?')\n\nROLE_TYPES = ('Donor','Producer','Announcer','Volunteer','Listener')\n\ndb.define_table('organization',\n    Field('name'),\n    Field('url'),\n    Field('address'),\n    Field('phone'),\n    )\ndb.organization.name.requires=[IS_NOT_EMPTY(),IS_NOT_IN_DB(db,'organization.name')]\ndb.organization.url.requires=IS_URL()\ndb.organization.phone.requires=is_phone\n\ndb.define_table('person',\n    Field('name'),\n    Field('role'),\n    )\ndb.person.name.requires=[IS_NOT_EMPTY(),IS_NOT_IN_DB(db,'person.name')]\ndb.person.role.requires=IS_IN_SET(ROLE_TYPES)\n\ndb.define_table('program',\n    Field('title')\n    )\n\ndb.define_table('segment',\n    Field('title'),\n    Field('start_time','datetime'),\n    Field('end_time','datetime'),\n    Field('description','text'),\n    Field('program',db.program)\n    )\n\ndb.segment.title.requires=IS_NOT_EMPTY()\ndb.segment.person.requires=IS_IN_DB(db,'person.id','%(name)s')\ndb.segment.start_time.default=request.now\ndb.segment.end_time.default=request.now\n\ndb.define_table('campaign',\n    Field('title'),\n    Field('start_time','datetime'),\n    Field('end_time','datetime'),\n    Field('description','text'),\n    Field('segment',db.segment)\n    )\n\ndb.campaign.title.requires=IS_NOT_EMPTY()\ndb.campaign.person.requires=IS_IN_DB(db,'person.id','%(name)s')\ndb.campaign.start_time.default=request.now\ndb.campaign.end_time.default=request.now\n\n\ndb.define_table('log',\n    Field('person',db.person),\n    Field('body','text'),\n    Field('log_time','datetime')\n    )\ndb.log.person.requires=IS_IN_DB(db,'person.id','%(name)s')\ndb.log.body.requires=IS_NOT_EMPTY()\ndb.log.log_time.default=request.now\n    \ndb.define_table('tag',\n    Field('table_name'),\n    Field('record_id','integer'),\n    Field('name')\n)\ndb.tag.name.requires=IS_ALPHANUMERIC()\n"
p6
sS'traceback'
p7
S'Traceback (most recent call last):\n  File "/home/john/webdev/depaul/web2py-trunk/gluon/restricted.py", line 184, in restricted\n  File "/home/john/webdev/depaul/google_appengine/web2py/applications/pledgedrives/models/db_pledgedrive.py", line 39, in <module>\n    db.segment.person.requires=IS_IN_DB(db,\'person.id\',\'%(name)s\')\n  File "/home/john/webdev/depaul/google_appengine/web2py/gluon/sql.py", line 1499, in __getattr__\n    return dict.__getitem__(self,key)\nKeyError: \'person\'\n'
p8
s.